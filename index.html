<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>*** SAM: SOFTWARE AUTOMATIC MOUTH ***</title>
  <script src="dist/samjs.js"></script>
  <script src="heads.js"></script>
  <!-- favicon section appletouch favicon etc -->
  <link rel="icon" type="image/png" href="favicon-32x32.png">
  <!-- 16x16 favicon -->
  <link rel="shortcut icon" href="favicon-16x16.png">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png">
  <link rel="icon" href="favicon.ico">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="icon" type="image/vnd.microsoft.icon" href="favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="SAM: Software Automatic Mouth - A text-to-speech program in JavaScript">
  <meta name="keywords" content="SAM, Software Automatic Mouth, text-to-speech">
  <meta name="author" content="GoHubbo">
  <meta name="robots" content="index, follow">
  <meta name="language" content="English">
  <meta name="copyright" content="Copyright Â© 2023 GoHubbo">
  <!-- jquery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- JAVASCRIPT FOR SPINNING FAVICON -->
  <script src="spinning-favicon.js"></script>
  <style>
    body {
      background-color: #000080;
      background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
      color: #00FF00;
      font-family: "Times New Roman", Times, serif;
      margin: 0; padding: 0;
    }

    #main-container {
      display: flex;
      border: 4px outset #cccccc;
      margin: 10px;
      background: #c0c0c0;
      color: #000;
      min-height: 95vh;
    }

    #sidebar {
      width: 150px;
      background: #808080;
      border-right: 2px inset #ffffff;
      padding: 15px;
      font-weight: bold;
      text-align: center;
    }

    #sidebar a {
      display: block;
      color: #ffff00;
      text-decoration: underline;
      margin-bottom: 20px;
      font-size: 14px;
    }

    #content {
      padding: 20px;
      flex-grow: 1;
      overflow: hidden;
    }

    h1 {
      background: linear-gradient(90deg, #000080, #008080);
      color: white;
      padding: 5px;
      font-style: italic;
      border: 2px inset #fff;
      text-shadow: 2px 2px #000;
      font-size: 24px;
      margin-top: 0;
    }

    .retro-box {
      border: 2px inset #ffffff;
      background: #fff;
      padding: 15px;
      margin-bottom: 20px;
    }

    input[type="text"] {
      font-family: "Courier New", monospace;
      background: #ffffcc;
      border: 2px inset #808080;
      width: 95%;
      padding: 5px;
    }

    .control-panel {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
      background: #d4d0c8;
      padding: 10px;
      border: 1px solid #808080;
    }

    input[type="button"] {
      background: #c0c0c0;
      border-top: 2px solid #fff;
      border-left: 2px solid #fff;
      border-right: 2px solid #404040;
      border-bottom: 2px solid #404040;
      padding: 5px 15px;
      font-weight: bold;
      cursor: pointer;
    }

    input[type="button"]:active {
      border: 2px inset #000;
      background: #a0a0a0;
    }

    table {
      width: 100%;
      border: 2px solid #000;
      background: #fff;
      font-family: Arial, sans-serif;
      font-size: 12px;
      border-collapse: collapse;
    }

    th { background: #000080; color: white; padding: 5px; }
    td { border: 1px solid #ccc; padding: 5px; text-align: center; }
    
    /* Preset Links */
    .preset-link { color: blue; text-decoration: underline; cursor: pointer; font-weight: bold; }

    marquee {
      background: #000;
      color: #ff0000;
      font-family: 'Courier New', Courier, monospace;
      font-weight: bold;
      border: 1px solid #ff0000;
    }

    .hit-counter {
      font-family: "Courier New", monospace;
      background: #000;
      color: #00ff00;
      padding: 2px 5px;
      border: 1px solid #fff;
      margin-top: 10px;
    }
    .img {
      /* logo img */
      /* make the image black */
      filter: brightness(2) invert(1);
    }
    .net {

    }
  </style>
</head>

<body>

  <div id="main-container">
    <div id="sidebar">
      <div style="color: #fff; margin-bottom: 10px;"><img src="ljkh.png" class="img" height="130px" alt="samLogo"></div>
      <a href="#">HOME</a>
      <a href="#" id="voices">VOICES</a>
      <a href="#">GUESTBOOK</a>
      <br>
      <img src="https://media3.giphy.com/media/v1.Y2lkPTZjMDliOTUyN3Iya3VvbnRyOW90Y3pnOXZra2wza2djYXIxMmFzNHowZTZiMHZoeiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/anjRJ4nv9WJzO/giphy.gif" style="border-radius: 20px;" width="100" alt="Netscape">
      <a href="https://www.freecounterstat.com" title="web page counter"><img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=5wdxgzjl4yt82da3lugbusmqxxte2smb" border="0" title="web page counter" alt="web page counter"></a>

    </div>

    <div id="content">
      <marquee scrollamount="5">*** WELCOME TO THE ULTIMATE SAM TEXT-TO-SPEECH RESOURCE ***</marquee>
      
      <h1>Software Automatic Mouth (SAM)</h1>
      
      <div class="retro-box">
        <p><b>What is SAM?</b><br>
        Sam is a very small Text-To-Speech (TTS) program adapted to Javascript. Feel the power of 8-bit speech in your browser!</p>
      </div>

      <div class="retro-box" style="background: #d4d0c8;">
        <h2 style="margin-top:0; font-size: 18px;">Speech Engine Console</h2>
        <label>Text to speak:</label><br>
        <input type="text" id="speechinput" value="Hello, my name is SAM.">
        
        <div class="control-panel">
          <div>
            <label id="pitch-lbl">Pitch: 64</label><br>
            <input type="range" id="pitch" min="0" max="255" value="64">
          </div>
          <div>
            <label id="speed-lbl">Speed: 72</label><br>
            <input type="range" id="speed" min="1" max="255" value="72">
          </div>
          <div>
            <label id="mouth-lbl">Mouth: 128</label><br>
            <input type="range" id="mouth" min="0" max="255" value="128">
          </div>
          <div>
            <label id="throat-lbl">Throat: 128</label><br>
            <input type="range" id="throat" min="0" max="255" value="128">
          </div>
        </div>
        
        <div style="margin-top: 15px; text-align: center;">
          <input type="button" id="say" value="Say">
          <input type="button" id="download" value="Download">
        </div>
      </div>

      <h3>Voice Presets</h3>
      <table cellpadding="4">
        <thead>
          <tr>
            <th>Description</th>
            <th>Speed</th>
            <th>Pitch</th>
            <th>Throat</th>
            <th>Mouth</th>
          </tr>
        </thead>
        <tbody id="preset-body">
          </tbody>
      </table>

      <p align="center">
        <font size="2">
          This site is maintained by GoHubbo<br>
          <a href="https://github.com/GoHubbo/sam">Download Source Code Here</a>
        </font>
      </p>
    </div>
  </div>

  <script>
    // 1. Initial configuration
    const opts = { pitch: 64, speed: 72, mouth: 128, throat: 128 };
    
    const presets = {
      sam:               {speed: 72, pitch: 64, throat: 128, mouth: 128},
      elf:               {speed: 72, pitch: 64, throat: 110, mouth: 160},
      little_robot:      {speed: 92, pitch: 60, throat: 190, mouth: 190},
      stuffy_guy:        {speed: 82, pitch: 72, throat: 110, mouth: 105},
      little_old_lady:   {speed: 82, pitch: 32, throat: 145, mouth: 145},
      extra_terrestrial: {speed: 100, pitch: 64, throat: 150, mouth: 200},
    };

    document.addEventListener('DOMContentLoaded', function() {
      const input = document.getElementById('speechinput');
      const controls = {};

      // 2. Setup the sliders and labels
      const updateLabel = (name, value) => {
        const label = document.getElementById(name + '-lbl');
        if (label) label.innerText = name.charAt(0).toUpperCase() + name.substring(1) + ': ' + value;
      };

      const setOpt = (name, value) => {
        opts[name] = parseInt(value);
        if (controls[name]) controls[name].value = value;
        updateLabel(name, value);
      };

      ['speed', 'pitch', 'mouth', 'throat'].forEach((name) => {
        const e = document.getElementById(name);
        controls[name] = e;
        e.oninput = function (ev) {
          setOpt(name, ev.target.value);
        };
        e.value = opts[name];
      });

      // 3. Setup Preset Table
      const presetBody = document.getElementById('preset-body');
      Object.keys(presets).forEach(key => {
        const p = presets[key];
        const row = document.createElement('tr');
        row.innerHTML = `
          <td><span class="preset-link" data-id="${key}">${key.replace(/_/g, ' ').toUpperCase()}</span></td>
          <td>${p.speed}</td>
          <td>${p.pitch}</td>
          <td>${p.throat}</td>
          <td>${p.mouth}</td>
        `;
        presetBody.appendChild(row);
      });

      // Delegate click for presets
      document.addEventListener('click', (e) => {
        if (e.target.classList.contains('preset-link')) {
          const id = e.target.getAttribute('data-id');
          const values = presets[id];
          ['speed', 'pitch', 'mouth', 'throat'].forEach((name) => {
            setOpt(name, values[name]);
          });
        }
      });

      // 4. Speech Logic
      let speech;
      document.getElementById('say').addEventListener('click', function (e) {
        e.preventDefault();
        
        // Wake up audio context for modern browsers
        if (window.AudioContext || window.webkitAudioContext) {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            if (ctx.state === 'suspended') ctx.resume();
        }

        try {
          if (speech) speech.abort();
          // Create new SamJs instance with current options
          const sam = new SamJs(opts);
          speech = sam.speak(input.value);
        } catch (err) {
          console.error(err);
          alert("Error: SamJs library not loaded or audio blocked.");
        }
      });

      document.getElementById('download').addEventListener('click', function (e) {
        e.preventDefault();
        const sam = new SamJs(opts);
        sam.download(input.value);
      });
    });
  </script>
</body>
</html>